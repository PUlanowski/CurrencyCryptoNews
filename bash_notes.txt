#secure copy to EC2
scp -C -i ./pw.ambari.study.pem -r ./'Capstone Project' hadoop@ec2-3-239-92-240.compute-1.amazonaws.com:~/Capstone
#getting pip on EC2
curl -O https://bootstrap.pypa.io/get-pip.py
python get-pip.py
pip install kaggle
cd /home/hadoop/.kaggle
vim kaggle.json
#paste data from downloaded kaggle token
cd ~/.kaggle/kaggle/.json
chmod 600 kaggle.json
cd ~/Capstone/
python fetch_resources.py

### DOCKER RUNS ###

#create spark network overlay
docker network create --driver bridge spark-net-bridge

#postgres run
docker run --network spark-net-bridge --name postgres -e POSTGRES_HOST_AUTH_METHOD=trust -d -p 5432:5432 postgres

#cassandra run
docker run --network spark-net-bridge --name cassie  -d -p 9042:9042 cassandra

#jupyter notebook run
docker run --network spark-net-bridge -p 8888:8888 -p 4040:4040 -e JUPYTER_ENABLE_LAB=yes --name pyspark jupyter/pyspark-notebook

#jupyter container copy
docker cp "C:\Users\pit\Google Drive\Udacity\Capstone Project\jdbc\postgresql-42.2.5.jar" fde9a5008c29:/home/jovyan/postgresql-42.2.5.jar
docker cp "C:\Users\pit\Google Drive\Udacity\Capstone Project\analysis.ipynb" fde9a5008c29:/home/jovyan/analysis.ipynb

#check local network
docker network inspect spark-net-bridge

#attach to container from powershell
docker exec -u 0 -it <container name> bash


#attach to container from powershell
docker exec -u 0 -it <container name> bash

docker run --network spark-net-bridge -p 8888:8888 -p 4040:4040 -p 8080:8080 -e -d JUPYTER_ENABLE_LAB=yes --name pyspark-test jupyter/pyspark-notebook
